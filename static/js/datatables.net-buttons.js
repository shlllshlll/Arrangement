!function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(n){return t(n,window,document)}):"object"==typeof exports?module.exports=function(n,e){return n||(n=window),e&&e.fn.dataTable||(e=require("datatables.net")(n,e).$),t(e,n,n.document)}:t(jQuery,window,document)}(function(t,n,e,o){"use strict";var a,r=t.fn.dataTable,s=0,u=0,c=r.ext.buttons,i=function(n,e){void 0===e&&(e={}),!0===e&&(e={}),t.isArray(e)&&(e={buttons:e}),this.c=t.extend(!0,{},i.defaults,e),e.buttons&&(this.c.buttons=e.buttons),this.s={dt:new r.Api(n),buttons:[],listenKeys:"",namespace:"dtb"+s++},this.dom={container:t("<"+this.c.dom.container.tag+"/>").addClass(this.c.dom.container.className)},this._constructor()};t.extend(i.prototype,{action:function(t,n){var e=this._nodeToButton(t);return n===o?e.conf.action:(e.conf.action=n,this)},active:function(n,e){var a=this._nodeToButton(n),r=this.c.dom.button.active,s=t(a.node);return e===o?s.hasClass(r):(s.toggleClass(r,e===o||e),this)},add:function(t,n){var e=this.s.buttons;if("string"==typeof n){for(var o=n.split("-"),a=this.s,r=0,s=o.length-1;r<s;r++)a=a.buttons[1*o[r]];e=a.buttons,n=1*o[o.length-1]}return this._expandButton(e,t,!1,n),this._draw(),this},container:function(){return this.dom.container},disable:function(n){var e=this._nodeToButton(n);return t(e.node).addClass(this.c.dom.button.disabled),this},destroy:function(){t("body").off("keyup."+this.s.namespace);var n,e,o=this.s.buttons.slice();for(n=0,e=o.length;n<e;n++)this.remove(o[n].node);this.dom.container.remove();var a=this.s.dt.settings()[0];for(n=0,e=a.length;n<e;n++)if(a.inst===this){a.splice(n,1);break}return this},enable:function(n,e){if(!1===e)return this.disable(n);var o=this._nodeToButton(n);return t(o.node).removeClass(this.c.dom.button.disabled),this},name:function(){return this.c.name},node:function(n){var e=this._nodeToButton(n);return t(e.node)},processing:function(n,e){var a=this._nodeToButton(n);return e===o?t(a.node).hasClass("processing"):(t(a.node).toggleClass("processing",e),this)},remove:function(n){var e=this._nodeToButton(n),o=this._nodeToHost(n),a=this.s.dt;if(e.buttons.length)for(var r=e.buttons.length-1;r>=0;r--)this.remove(e.buttons[r].node);e.conf.destroy&&e.conf.destroy.call(a.button(n),a,t(n),e.conf),this._removeKey(e.conf),t(e.node).remove();var s=t.inArray(e,o);return o.splice(s,1),this},text:function(n,e){var a=this._nodeToButton(n),r=this.c.dom.collection.buttonLiner,s=a.inCollection&&r&&r.tag?r.tag:this.c.dom.buttonLiner.tag,u=this.s.dt,c=t(a.node),i=function(t){return"function"==typeof t?t(u,c,a.conf):t};return e===o?i(a.conf.text):(a.conf.text=e,s?c.children(s).html(i(e)):c.html(i(e)),this)},_constructor:function(){var n=this,o=this.s.dt,a=o.settings()[0],r=this.c.buttons;a._buttons||(a._buttons=[]),a._buttons.push({inst:this,name:this.c.name});for(var s=0,u=r.length;s<u;s++)this.add(r[s]);o.on("destroy",function(t,e){e===a&&n.destroy()}),t("body").on("keyup."+this.s.namespace,function(t){if(!e.activeElement||e.activeElement===e.body){var o=String.fromCharCode(t.keyCode).toLowerCase();-1!==n.s.listenKeys.toLowerCase().indexOf(o)&&n._keypress(o,t)}})},_addKey:function(n){n.key&&(this.s.listenKeys+=t.isPlainObject(n.key)?n.key.key:n.key)},_draw:function(t,n){t||(t=this.dom.container,n=this.s.buttons),t.children().detach();for(var e=0,o=n.length;e<o;e++)t.append(n[e].inserter),t.append(" "),n[e].buttons&&n[e].buttons.length&&this._draw(n[e].collection,n[e].buttons)},_expandButton:function(n,e,a,r){for(var s=this.s.dt,u=t.isArray(e)?e:[e],c=0,i=u.length;c<i;c++){var l=this._resolveExtends(u[c]);if(l)if(t.isArray(l))this._expandButton(n,l,a,r);else{var d=this._buildButton(l,a);if(d){if(r!==o?(n.splice(r,0,d),r++):n.push(d),d.conf.buttons){var f=this.c.dom.collection;d.collection=t("<"+f.tag+"/>").addClass(f.className).attr("role","menu"),d.conf._collection=d.collection,this._expandButton(d.buttons,d.conf.buttons,!0,r)}l.init&&l.init.call(s.button(d.node),s,t(d.node),l),0}}}},_buildButton:function(n,e){var o=this.c.dom.button,a=this.c.dom.buttonLiner,r=this.c.dom.collection,s=this.s.dt,c=function(t){return"function"==typeof t?t(s,d,n):t};if(e&&r.button&&(o=r.button),e&&r.buttonLiner&&(a=r.buttonLiner),n.available&&!n.available(s,n))return!1;var i=function(n,e,o,a){a.action.call(e.button(o),n,e,o,a),t(e.table().node()).triggerHandler("buttons-action.dt",[e.button(o),e,o,a])},l=n.tag||o.tag,d=t("<"+l+"/>").addClass(o.className).attr("tabindex",this.s.dt.settings()[0].iTabIndex).attr("aria-controls",this.s.dt.table().node().id).on("click.dtb",function(t){t.preventDefault(),!d.hasClass(o.disabled)&&n.action&&i(t,s,d,n),d.blur()}).on("keyup.dtb",function(t){13===t.keyCode&&!d.hasClass(o.disabled)&&n.action&&i(t,s,d,n)});if("a"===l.toLowerCase()&&d.attr("href","#"),"button"===l.toLowerCase()&&d.attr("type","button"),a.tag){var f=t("<"+a.tag+"/>").html(c(n.text)).addClass(a.className);"a"===a.tag.toLowerCase()&&f.attr("href","#"),d.append(f)}else d.html(c(n.text));!1===n.enabled&&d.addClass(o.disabled),n.className&&d.addClass(n.className),n.titleAttr&&d.attr("title",c(n.titleAttr)),n.attr&&d.attr(n.attr),n.namespace||(n.namespace=".dt-button-"+u++);var h,p=this.c.dom.buttonContainer;return h=p&&p.tag?t("<"+p.tag+"/>").addClass(p.className).append(d):d,this._addKey(n),{conf:n,node:d.get(0),inserter:h,buttons:[],inCollection:e,collection:null}},_nodeToButton:function(t,n){n||(n=this.s.buttons);for(var e=0,o=n.length;e<o;e++){if(n[e].node===t)return n[e];if(n[e].buttons.length){var a=this._nodeToButton(t,n[e].buttons);if(a)return a}}},_nodeToHost:function(t,n){n||(n=this.s.buttons);for(var e=0,o=n.length;e<o;e++){if(n[e].node===t)return n;if(n[e].buttons.length){var a=this._nodeToHost(t,n[e].buttons);if(a)return a}}},_keypress:function(n,e){if(!e._buttonsHandled){var o=function(o,a){if(o.key)if(o.key===n)e._buttonsHandled=!0,t(a).click();else if(t.isPlainObject(o.key)){if(o.key.key!==n)return;if(o.key.shiftKey&&!e.shiftKey)return;if(o.key.altKey&&!e.altKey)return;if(o.key.ctrlKey&&!e.ctrlKey)return;if(o.key.metaKey&&!e.metaKey)return;e._buttonsHandled=!0,t(a).click()}},a=function(t){for(var n=0,e=t.length;n<e;n++)o(t[n].conf,t[n].node),t[n].buttons.length&&a(t[n].buttons)};a(this.s.buttons)}},_removeKey:function(n){if(n.key){var e=t.isPlainObject(n.key)?n.key.key:n.key,o=this.s.listenKeys.split(""),a=t.inArray(e,o);o.splice(a,1),this.s.listenKeys=o.join("")}},_resolveExtends:function(n){var e,a,r=this.s.dt,s=function(e){for(var a=0;!t.isPlainObject(e)&&!t.isArray(e);){if(e===o)return;if("function"==typeof e){if(!(e=e(r,n)))return!1}else if("string"==typeof e){if(!c[e])throw"Unknown button type: "+e;e=c[e]}if(++a>30)throw"Buttons: Too many iterations"}return t.isArray(e)?e:t.extend({},e)};for(n=s(n);n&&n.extend;){if(!c[n.extend])throw"Cannot extend unknown button type: "+n.extend;var u=s(c[n.extend]);if(t.isArray(u))return u;if(!u)return!1;var i=u.className;n=t.extend({},u,n),i&&n.className!==i&&(n.className=i+" "+n.className);var l=n.postfixButtons;if(l){for(n.buttons||(n.buttons=[]),e=0,a=l.length;e<a;e++)n.buttons.push(l[e]);n.postfixButtons=null}var d=n.prefixButtons;if(d){for(n.buttons||(n.buttons=[]),e=0,a=d.length;e<a;e++)n.buttons.splice(e,0,d[e]);n.prefixButtons=null}n.extend=u.extend}return n}}),i.background=function(n,e,a){a===o&&(a=400),n?t("<div/>").addClass(e).css("display","none").appendTo("body").fadeIn(a):t("body > div."+e).fadeOut(a,function(){t(this).removeClass(e).remove()})},i.instanceSelector=function(n,e){if(!n)return t.map(e,function(t){return t.inst});var o=[],a=t.map(e,function(t){return t.name}),r=function(n){if(t.isArray(n))for(var s=0,u=n.length;s<u;s++)r(n[s]);else if("string"==typeof n)if(-1!==n.indexOf(","))r(n.split(","));else{var c=t.inArray(t.trim(n),a);-1!==c&&o.push(e[c].inst)}else"number"==typeof n&&o.push(e[n].inst)};return r(n),o},i.buttonSelector=function(n,e){for(var a=[],r=function(t,n,e){for(var a,s,u=0,c=n.length;u<c;u++)(a=n[u])&&(s=e!==o?e+u:u+"",t.push({node:a.node,name:a.conf.name,idx:s}),a.buttons&&r(t,a.buttons,s+"-"))},s=function(n,e){var u,c,i=[];r(i,e.s.buttons);var l=t.map(i,function(t){return t.node});if(t.isArray(n)||n instanceof t)for(u=0,c=n.length;u<c;u++)s(n[u],e);else if(null===n||n===o||"*"===n)for(u=0,c=i.length;u<c;u++)a.push({inst:e,node:i[u].node});else if("number"==typeof n)a.push({inst:e,node:e.s.buttons[n].node});else if("string"==typeof n)if(-1!==n.indexOf(",")){var d=n.split(",");for(u=0,c=d.length;u<c;u++)s(t.trim(d[u]),e)}else if(n.match(/^\d+(\-\d+)*$/)){var f=t.map(i,function(t){return t.idx});a.push({inst:e,node:i[t.inArray(n,f)].node})}else if(-1!==n.indexOf(":name")){var h=n.replace(":name","");for(u=0,c=i.length;u<c;u++)i[u].name===h&&a.push({inst:e,node:i[u].node})}else t(l).filter(n).each(function(){a.push({inst:e,node:this})});else if("object"==typeof n&&n.nodeName){var p=t.inArray(n,l);-1!==p&&a.push({inst:e,node:l[p]})}},u=0,c=n.length;u<c;u++){var i=n[u];s(e,i)}return a},i.defaults={buttons:["copy","excel","csv","pdf","print"],name:"main",tabIndex:0,dom:{container:{tag:"div",className:"dt-buttons"},collection:{tag:"div",className:"dt-button-collection"},button:{tag:"button",className:"dt-button",active:"active",disabled:"disabled"},buttonLiner:{tag:"span",className:""}}},i.version="1.5.2",t.extend(c,{collection:{text:function(t){return t.i18n("buttons.collection","Collection")},className:"buttons-collection",action:function(o,a,r,s){var u=r,c=t(r).parents("div.dt-button-collection"),l=u.position(),d=t(a.table().container()),f=!1,h=u;c.length&&(f=t(".dt-button-collection").position(),h=c,t("body").trigger("click.dtb-collection")),h.parents("body")[0]!==e.body&&(h=e.body.lastChild),s._collection.addClass(s.collectionLayout).css("display","none").insertAfter(h).fadeIn(s.fade);var p=s._collection.css("position");if(f&&"absolute"===p)s._collection.css({top:f.top,left:f.left});else if("absolute"===p){s._collection.css({top:l.top+u.outerHeight(),left:l.left});var b=d.offset().top+d.height(),y=l.top+u.outerHeight()+s._collection.outerHeight()-b,m=l.top-s._collection.outerHeight();(y>d.offset().top-m||s.dropup)&&s._collection.css("top",l.top-s._collection.outerHeight()-5);var v=l.left+s._collection.outerWidth(),g=d.offset().left+d.width();v>g&&s._collection.css("left",l.left-(v-g));var _=u.offset().left+s._collection.outerWidth();_>t(n).width()&&s._collection.css("left",l.left-(_-t(n).width()))}else{var k=s._collection.height()/2;k>t(n).height()/2&&(k=t(n).height()/2),s._collection.css("marginTop",-1*k)}s.background&&i.background(!0,s.backgroundClassName,s.fade);var x=function(){s._collection.fadeOut(s.fade,function(){s._collection.detach()}),t("div.dt-button-background").off("click.dtb-collection"),i.background(!1,s.backgroundClassName,s.fade),t("body").off(".dtb-collection"),a.off("buttons-action.b-internal")};setTimeout(function(){t("div.dt-button-background").on("click.dtb-collection",function(){}),t("body").on("click.dtb-collection",function(n){var e=t.fn.addBack?"addBack":"andSelf";t(n.target).parents()[e]().filter(s._collection).length||x()}).on("keyup.dtb-collection",function(t){27===t.keyCode&&x()}),s.autoClose&&a.on("buttons-action.b-internal",function(){x()})},10)},background:!0,collectionLayout:"",backgroundClassName:"dt-button-background",autoClose:!1,fade:400,attr:{"aria-haspopup":!0}},copy:function(t,n){return c.copyHtml5?"copyHtml5":c.copyFlash&&c.copyFlash.available(t,n)?"copyFlash":void 0},csv:function(t,n){return c.csvHtml5&&c.csvHtml5.available(t,n)?"csvHtml5":c.csvFlash&&c.csvFlash.available(t,n)?"csvFlash":void 0},excel:function(t,n){return c.excelHtml5&&c.excelHtml5.available(t,n)?"excelHtml5":c.excelFlash&&c.excelFlash.available(t,n)?"excelFlash":void 0},pdf:function(t,n){return c.pdfHtml5&&c.pdfHtml5.available(t,n)?"pdfHtml5":c.pdfFlash&&c.pdfFlash.available(t,n)?"pdfFlash":void 0},pageLength:function(n){var e=n.settings()[0].aLengthMenu,o=t.isArray(e[0])?e[0]:e,a=t.isArray(e[0])?e[1]:e,r=function(t){return t.i18n("buttons.pageLength",{"-1":"Show all rows",_:"Show %d rows"},t.page.len())};return{extend:"collection",text:r,className:"buttons-page-length",autoClose:!0,buttons:t.map(o,function(t,n){return{text:a[n],className:"button-page-length",action:function(n,e){e.page.len(t).draw()},init:function(n,e,o){var a=this,r=function(){a.active(n.page.len()===t)};n.on("length.dt"+o.namespace,r),r()},destroy:function(t,n,e){t.off("length.dt"+e.namespace)}}}),init:function(t,n,e){var o=this;t.on("length.dt"+e.namespace,function(){o.text(r(t))})},destroy:function(t,n,e){t.off("length.dt"+e.namespace)}}}}),r.Api.register("buttons()",function(t,n){n===o&&(n=t,t=o),this.selector.buttonGroup=t;var e=this.iterator(!0,"table",function(e){if(e._buttons)return i.buttonSelector(i.instanceSelector(t,e._buttons),n)},!0);return e._groupSelector=t,e}),r.Api.register("button()",function(t,n){var e=this.buttons(t,n);return e.length>1&&e.splice(1,e.length),e}),r.Api.registerPlural("buttons().active()","button().active()",function(t){return t===o?this.map(function(t){return t.inst.active(t.node)}):this.each(function(n){n.inst.active(n.node,t)})}),r.Api.registerPlural("buttons().action()","button().action()",function(t){return t===o?this.map(function(t){return t.inst.action(t.node)}):this.each(function(n){n.inst.action(n.node,t)})}),r.Api.register(["buttons().enable()","button().enable()"],function(t){return this.each(function(n){n.inst.enable(n.node,t)})}),r.Api.register(["buttons().disable()","button().disable()"],function(){return this.each(function(t){t.inst.disable(t.node)})}),r.Api.registerPlural("buttons().nodes()","button().node()",function(){var n=t();return t(this.each(function(t){n=n.add(t.inst.node(t.node))})),n}),r.Api.registerPlural("buttons().processing()","button().processing()",function(t){return t===o?this.map(function(t){return t.inst.processing(t.node)}):this.each(function(n){n.inst.processing(n.node,t)})}),r.Api.registerPlural("buttons().text()","button().text()",function(t){return t===o?this.map(function(t){return t.inst.text(t.node)}):this.each(function(n){n.inst.text(n.node,t)})}),r.Api.registerPlural("buttons().trigger()","button().trigger()",function(){return this.each(function(t){t.inst.node(t.node).trigger("click")})}),r.Api.registerPlural("buttons().containers()","buttons().container()",function(){var n=t(),e=this._groupSelector;return this.iterator(!0,"table",function(t){if(t._buttons)for(var o=i.instanceSelector(e,t._buttons),a=0,r=o.length;a<r;a++)n=n.add(o[a].container())}),n}),r.Api.register("button().add()",function(t,n){var e=this.context;if(e.length){var o=i.instanceSelector(this._groupSelector,e[0]._buttons);o.length&&o[0].add(n,t)}return this.button(this._groupSelector,t)}),r.Api.register("buttons().destroy()",function(){return this.pluck("inst").unique().each(function(t){t.destroy()}),this}),r.Api.registerPlural("buttons().remove()","buttons().remove()",function(){return this.each(function(t){t.inst.remove(t.node)}),this}),r.Api.register("buttons.info()",function(n,e,r){var s=this;return!1===n?(t("#datatables_buttons_info").fadeOut(function(){t(this).remove()}),clearTimeout(a),a=null,this):(a&&clearTimeout(a),t("#datatables_buttons_info").length&&t("#datatables_buttons_info").remove(),n=n?"<h2>"+n+"</h2>":"",t('<div id="datatables_buttons_info" class="dt-button-info"/>').html(n).append(t("<div/>")["string"==typeof e?"html":"append"](e)).css("display","none").appendTo("body").fadeIn(),r!==o&&0!==r&&(a=setTimeout(function(){s.buttons.info(!1)},r)),this)}),r.Api.register("buttons.exportData()",function(t){if(this.context.length)return b(new r.Api(this.context[0]),t)}),r.Api.register("buttons.exportInfo()",function(t){return t||(t={}),{filename:l(t),title:f(t),messageTop:h(this,t.message||t.messageTop,"top"),messageBottom:h(this,t.messageBottom,"bottom")}});var l=function(n){var e="*"===n.filename&&"*"!==n.title&&n.title!==o&&null!==n.title&&""!==n.title?n.title:n.filename;if("function"==typeof e&&(e=e()),e===o||null===e)return null;-1!==e.indexOf("*")&&(e=t.trim(e.replace("*",t("head > title").text()))),e=e.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,"");var a=d(n.extension);return a||(a=""),e+a},d=function(t){return null===t||t===o?null:"function"==typeof t?t():t},f=function(n){var e=d(n.title);return null===e?null:-1!==e.indexOf("*")?e.replace("*",t("head > title").text()||"Exported data"):e},h=function(n,e,o){var a=d(e);if(null===a)return null;var r=t("caption",n.table().container()).eq(0);return"*"===a?r.css("caption-side")!==o?null:r.length?r.text():"":a},p=t("<textarea/>")[0],b=function(n,e){var a=t.extend(!0,{},{rows:null,columns:"",modifier:{search:"applied",order:"applied"},orthogonal:"display",stripHtml:!0,stripNewlines:!0,decodeEntities:!0,trim:!0,format:{header:function(t){return r(t)},footer:function(t){return r(t)},body:function(t){return r(t)}},customizeData:null},e),r=function(t){return"string"!=typeof t?t:(t=(t=t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")).replace(/<!\-\-.*?\-\->/g,""),a.stripHtml&&(t=t.replace(/<[^>]*>/g,"")),a.trim&&(t=t.replace(/^\s+|\s+$/g,"")),a.stripNewlines&&(t=t.replace(/\n/g," ")),a.decodeEntities&&(p.innerHTML=t,t=p.value),t)},s=n.columns(a.columns).indexes().map(function(t){var e=n.column(t).header();return a.format.header(e.innerHTML,t,e)}).toArray(),u=n.table().footer()?n.columns(a.columns).indexes().map(function(t){var e=n.column(t).footer();return a.format.footer(e?e.innerHTML:"",t,e)}).toArray():null,c=t.extend({},a.modifier);n.select&&"function"==typeof n.select.info&&c.selected===o&&n.rows(a.rows,t.extend({selected:!0},c)).any()&&t.extend(c,{selected:!0});for(var i=n.rows(a.rows,c).indexes().toArray(),l=n.cells(i,a.columns),d=l.render(a.orthogonal).toArray(),f=l.nodes().toArray(),h=s.length,b=[],y=0,m=0,v=h>0?d.length/h:0;m<v;m++){for(var g=[h],_=0;_<h;_++)g[_]=a.format.body(d[y],m,_,f[y]),y++;b[m]=g}var k={header:s,footer:u,body:b};return a.customizeData&&a.customizeData(k),k};return t.fn.dataTable.Buttons=i,t.fn.DataTable.Buttons=i,t(e).on("init.dt plugin-init.dt",function(t,n){if("dt"===t.namespace){var e=n.oInit.buttons||r.defaults.buttons;e&&!n._buttons&&new i(n,e).container()}}),r.ext.feature.push({fnInit:function(t){var n=new r.Api(t),e=n.init().buttons||r.defaults.buttons;return new i(n,e).container()},cFeature:"B"}),i});